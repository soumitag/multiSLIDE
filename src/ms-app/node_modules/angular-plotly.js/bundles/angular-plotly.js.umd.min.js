!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","@angular/common"],e):e(((t=t||self)["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.ng.common)}(this,(function(t,e,o){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var n=function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var r in e=arguments[o])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};function r(t,e,o,n){var r,i=arguments.length,l=i<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(l=(i<3?r(l):i>3?r(e,o,l):r(e,o))||l);return i>3&&l&&Object.defineProperty(e,o,l),l}function i(t,e){var o,n,r,i,l={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,n&&(r=2&i[0]?n.return:i[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,i[1])).done)return r;switch(n=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,n=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(r=(r=l.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){l.label=i[1];break}if(6===i[0]&&l.label<r[1]){l.label=r[1],r=i;break}if(r&&l.label<r[2]){l.label=r[2],l.ops.push(i);break}r[2]&&l.ops.pop(),l.trys.pop();continue}i=e.call(t,l)}catch(t){i=[6,t],n=0}finally{o=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function l(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}var a=!1,u=function(){function t(){}var o;return o=t,t.setModuleName=function(t){o._moduleName=t},t.setPlotly=function(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");o._plotly=t},t.insert=function(t){return-1===o.instances.indexOf(t)&&o.instances.push(t),t},t.remove=function(t){var e=o.instances.indexOf(t);e>=0&&(o.instances.splice(e,1),o._plotly.purge(t))},Object.defineProperty(t.prototype,"debug",{get:function(){return!1===a},enumerable:!0,configurable:!0}),t.prototype.getInstanceByDivId=function(t){var e,n;try{for(var r=l(o.instances),i=r.next();!i.done;i=r.next()){var a=i.value;if(a&&a.id===t)return a}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},t.prototype.getPlotly=function(){if(void 0===o._plotly){var t="ViaCDN"===o._moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(t)}return o._plotly},t.prototype.waitFor=function(t){return new Promise((function(e){var o=function(){t()?e():setTimeout(o,10)};o()}))},t.prototype.newPlot=function(t,e,n,r,l){return a=this,u=void 0,p=function(){var a,u=this;return i(this,(function(i){switch(i.label){case 0:return[4,this.waitFor((function(){return"waiting"!==u.getPlotly()}))];case 1:return i.sent(),l?(a={data:e,layout:n,config:r,frames:l},[2,this.getPlotly().newPlot(t,a).then((function(){return o.insert(t)}))]):[2,this.getPlotly().newPlot(t,e,n,r).then((function(){return o.insert(t)}))]}}))},new((s=void 0)||(s=Promise))((function(t,e){function o(t){try{r(p.next(t))}catch(t){e(t)}}function n(t){try{r(p.throw(t))}catch(t){e(t)}}function r(e){e.done?t(e.value):new s((function(t){t(e.value)})).then(o,n)}r((p=p.apply(a,u||[])).next())}));var a,u,s,p},t.prototype.plot=function(t,e,o,n,r){if(r){var i={data:e,layout:o,config:n,frames:r};return this.getPlotly().plot(t,i)}return this.getPlotly().plot(t,e,o,n)},t.prototype.update=function(t,e,o,n,r){if(r){var i={data:e,layout:o,config:n,frames:r};return this.getPlotly().react(t,i)}return this.getPlotly().react(t,e,o,n)},t.prototype.resize=function(t){return this.getPlotly().Plots.resize(t)},t.instances=[],t._plotly=void 0,t._moduleName=void 0,t.ɵprov=e["ɵɵdefineInjectable"]({factory:function(){return new t},token:t,providedIn:"root"}),t=o=r([e.Injectable({providedIn:"root"})],t)}(),s=function(){function t(t,o,n){this.plotly=t,this.iterableDiffers=o,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new e.EventEmitter,this.update=new e.EventEmitter,this.purge=new e.EventEmitter,this.error=new e.EventEmitter,this.afterExport=new e.EventEmitter,this.afterPlot=new e.EventEmitter,this.animated=new e.EventEmitter,this.animatingFrame=new e.EventEmitter,this.animationInterrupted=new e.EventEmitter,this.autoSize=new e.EventEmitter,this.beforeExport=new e.EventEmitter,this.buttonClicked=new e.EventEmitter,this.click=new e.EventEmitter,this.plotly_click=new e.EventEmitter,this.clickAnnotation=new e.EventEmitter,this.deselect=new e.EventEmitter,this.doubleClick=new e.EventEmitter,this.framework=new e.EventEmitter,this.hover=new e.EventEmitter,this.legendClick=new e.EventEmitter,this.legendDoubleClick=new e.EventEmitter,this.relayout=new e.EventEmitter,this.restyle=new e.EventEmitter,this.redraw=new e.EventEmitter,this.selected=new e.EventEmitter,this.selecting=new e.EventEmitter,this.sliderChange=new e.EventEmitter,this.sliderEnd=new e.EventEmitter,this.sliderStart=new e.EventEmitter,this.transitioning=new e.EventEmitter,this.transitionInterrupted=new e.EventEmitter,this.unhover=new e.EventEmitter,this.relayouting=new e.EventEmitter,this.treemapclick=new e.EventEmitter,this.sunburstclick=new e.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}return t.prototype.ngOnInit=function(){var t=this;if(this.createPlot().then((function(){var e=t.createFigure();t.initialized.emit(e)})),this.plotly.debug&&this.click.observers.length>0){console.error("DEPRECATED: Reconsider using `(plotly_click)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);var t=this.createFigure();this.purge.emit(t),u.remove(this.plotlyInstance)},t.prototype.ngOnChanges=function(t){var e=!1,o=t.revision;o&&!o.isFirstChange()&&(e=!0);var n=t.debug;n&&!n.isFirstChange()&&(e=!0),e&&this.updatePlot(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){if(this.updateOnlyWithRevision)return!1;var t=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0);this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0);t&&this.plotlyInstance&&this.updatePlot()},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var t=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then((function(e){t.plotlyInstance=e,t.getWindow().gd=t.debug?e:void 0,t.eventNames.forEach((function(o){var n="plotly_"+o.toLowerCase();e.on(n,(function(e){return t[o].emit(e)}))})),e.on("plotly_click",(function(e){t.click.emit(e),t.plotly_click.emit(e)})),t.updateWindowResizeHandler()}),(function(e){console.error("Error while plotting:",e),t.error.emit(e)}))},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.updatePlot=function(){var t=this;if(!this.plotlyInstance){var e=new Error("Plotly component wasn't initialized");throw this.error.emit(e),e}var o=n({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,o,this.config,this.frames).then((function(){var e=t.createFigure();t.update.emit(e)}),(function(e){console.error("Error while updating plot:",e),t.error.emit(e)}))},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)},t.prototype.dataDifferTrackBy=function(t,e){var o=Object.assign({},e,{uid:""});return JSON.stringify(o)},t.ctorParameters=function(){return[{type:u},{type:e.IterableDiffers},{type:e.KeyValueDiffers}]},r([e.ViewChild("plot",{static:!0})],t.prototype,"plotEl",void 0),r([e.Input()],t.prototype,"data",void 0),r([e.Input()],t.prototype,"layout",void 0),r([e.Input()],t.prototype,"config",void 0),r([e.Input()],t.prototype,"frames",void 0),r([e.Input()],t.prototype,"style",void 0),r([e.Input()],t.prototype,"divId",void 0),r([e.Input()],t.prototype,"revision",void 0),r([e.Input()],t.prototype,"className",void 0),r([e.Input()],t.prototype,"debug",void 0),r([e.Input()],t.prototype,"useResizeHandler",void 0),r([e.Input()],t.prototype,"updateOnLayoutChange",void 0),r([e.Input()],t.prototype,"updateOnDataChange",void 0),r([e.Input()],t.prototype,"updateOnlyWithRevision",void 0),r([e.Output()],t.prototype,"initialized",void 0),r([e.Output()],t.prototype,"update",void 0),r([e.Output()],t.prototype,"purge",void 0),r([e.Output()],t.prototype,"error",void 0),r([e.Output()],t.prototype,"afterExport",void 0),r([e.Output()],t.prototype,"afterPlot",void 0),r([e.Output()],t.prototype,"animated",void 0),r([e.Output()],t.prototype,"animatingFrame",void 0),r([e.Output()],t.prototype,"animationInterrupted",void 0),r([e.Output()],t.prototype,"autoSize",void 0),r([e.Output()],t.prototype,"beforeExport",void 0),r([e.Output()],t.prototype,"buttonClicked",void 0),r([e.Output()],t.prototype,"click",void 0),r([e.Output()],t.prototype,"plotly_click",void 0),r([e.Output()],t.prototype,"clickAnnotation",void 0),r([e.Output()],t.prototype,"deselect",void 0),r([e.Output()],t.prototype,"doubleClick",void 0),r([e.Output()],t.prototype,"framework",void 0),r([e.Output()],t.prototype,"hover",void 0),r([e.Output()],t.prototype,"legendClick",void 0),r([e.Output()],t.prototype,"legendDoubleClick",void 0),r([e.Output()],t.prototype,"relayout",void 0),r([e.Output()],t.prototype,"restyle",void 0),r([e.Output()],t.prototype,"redraw",void 0),r([e.Output()],t.prototype,"selected",void 0),r([e.Output()],t.prototype,"selecting",void 0),r([e.Output()],t.prototype,"sliderChange",void 0),r([e.Output()],t.prototype,"sliderEnd",void 0),r([e.Output()],t.prototype,"sliderStart",void 0),r([e.Output()],t.prototype,"transitioning",void 0),r([e.Output()],t.prototype,"transitionInterrupted",void 0),r([e.Output()],t.prototype,"unhover",void 0),r([e.Output()],t.prototype,"relayouting",void 0),r([e.Output()],t.prototype,"treemapclick",void 0),r([e.Output()],t.prototype,"sunburstclick",void 0),t=r([e.Component({selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[u]})],t)}(),p=function(){function t(){}return t=r([e.NgModule({imports:[o.CommonModule],declarations:[s],providers:[u],exports:[s]})],t)}(),d=function(){function t(){if(!this.isValid()){throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.")}u.setPlotly(n.plotlyjs)}var n;return n=t,t.prototype.isValid=function(){return void 0!==n.plotlyjs&&"function"==typeof n.plotlyjs.plot},t.plotlyjs={},t=n=r([e.NgModule({imports:[o.CommonModule,p],declarations:[],exports:[s]})],t)}(),c=function(){function t(t){this.plotlyService=t,u.setModuleName("ViaCDN")}var n;return n=t,Object.defineProperty(t,"plotlyVersion",{set:function(t){if(!("latest"===t||/^\d\.\d{1,2}\.\d{1,2}$/.test(t)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3)");n.loadViaCDN(),n._plotlyVersion=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"plotlyBundle",{set:function(t){if(!(null===t||n.plotlyBundleNames.indexOf(t)>=0)){var e=n.plotlyBundleNames.map((function(t){return'"'+t+'"'})).join(", ");throw new Error("Invalid plotly bundle. Please set to null for full or "+e+" for a partial bundle.")}n._plotlyBundle=t},enumerable:!0,configurable:!0}),t.loadViaCDN=function(){u.setPlotly("waiting");setTimeout((function(){var t=null==n._plotlyBundle?"https://cdn.plot.ly/plotly-"+n._plotlyVersion+".min.js":"https://cdn.plot.ly/plotly-"+n._plotlyBundle+"-"+n._plotlyVersion+".min.js",e=document.createElement("script");e.type="text/javascript",e.src=t,e.onerror=function(){return console.error("Error loading plotly.js library from "+t)},document.getElementsByTagName("head")[0].appendChild(e);var o=200,r=function(){var e=window.Plotly;if(e)u.setPlotly(e);else{if(!(o>0))throw new Error("Error loading plotly.js library from "+t+". Timeout.");o--,setTimeout(r,50)}};r()}))},t.forRoot=function(t){throw new Error("[PlotlyViaCDNModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#customizing-the-plotlyjs-bundle")},t._plotlyBundle=null,t._plotlyVersion="latest",t.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],t.ctorParameters=function(){return[{type:u}]},t=n=r([e.NgModule({imports:[o.CommonModule,p],declarations:[],exports:[s]})],t)}(),y=function(){function t(){var t=window.Plotly;if(void 0===t)throw new Error("Plotly object not found on window.");u.setPlotly(t)}return t.forRoot=function(){throw new Error("[PlotlyViaWindowModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#plotly-via-window-module")},t=r([e.NgModule({imports:[o.CommonModule,p],declarations:[],exports:[s]})],t)}();t.PlotComponent=s,t.PlotlyModule=d,t.PlotlyService=u,t.PlotlyViaCDNModule=c,t.PlotlyViaWindowModule=y,t.ɵa=p,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-plotly.js.umd.min.js.map